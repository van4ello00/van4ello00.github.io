if(!JSON){var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}())}if(!String.prototype.trim){(function(){var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(a,"")}})()}(function(bk,s,aU){var aK=false,B="72",bF=42,o=bk.roistatHost,ab="0.2",I="1.0",be="roistat_visit",am="roistat_first_visit",b6="roistat_phone",aa="roistat_referrer",bN="roistat_marker",aA="roistat_marker_old",bQ="roistat_referrer_old",aQ="roistat_ab",bz="rs",t="roistat",F="leadhunter_expire",y=5*60*60,aV="roistat_leadHunterEnabled",d=7*24*60*60,bH={expires:d,path:"/"},J="roistat-promo",P="roistat-phone",r="roistat-phone-country",K="roistat-phone-region",u="roistat-phone-number",bZ="roistat-phone-tel",a0="country",ag="region",aE="number",ba="tel",j="roistat_call_tracking",C="roistat-js-script",aO="roistat_phone_replacement",aF="roistat_phone_script_data",bE="roistat-visit-id",an="roistat_metrika_counter_id",g="roistat_marker_from_referrer",aN="roistat_emailtracking_email",b="roistat_emailtracking_tracking_email",aX="roistat_emailtracking_emails",b1="roistat_proxy_forms",bI="roistat_isMultiDomain",bB=["roistat_param1","roistat_param2","roistat_param3","roistat_param4","roistat_param5"],bf="roistat_debug",ap="roistat_settings_saved",bq="nocookie";var bT=o.replace(/^cloud\./,"");var bO="collector."+bT;var a7={callTrackingEnabled:true,callTrackingManual:false,jsonpRequestTimeout:100};var bg={isVisitProcessed:false,visitFromUser:null,cookies:{},pageParams:{},source:{marker:null},isSettingsUpdating:false};var bG={onVisitProcessed:[],onCallTrackingPhoneReceived:[],onSPAPageChanged:[]};if(bk.roistatAlreadyStarted){if(typeof console!=="undefined"&&console.log){console.log("Call: roistat already started, skip")
}return}bk.roistatAlreadyStarted=true;if(bk.roistatCookieDomain){bH.domain=bk.roistatCookieDomain}bk.roistat={version:B,getSource:function(){return bg.source.marker},visit:null,getVisit:function(){return roistat.visit},setVisit:function(cb){bg.visitFromUser=cb},registerOnVisitProcessedCallback:function(cb){bx(cb)},registerOnCalltrackingPhoneReceivedCallback:function(cb){aL(cb)},disableCallTracking:function(){a7.callTrackingEnabled=false},setCallTrackingManualMode:function(){a7.callTrackingManual=true},setJSONPRequestTimeout:function(cb){a7.jsonpRequestTimeout=cb},callTracking:{enabled:0,phone:"",sessionTime:0,replacementClasses:"",phonePrefix:""},emailtracking:{enabled:true,loaded:false,email:null,trackingEmail:null,emails:null,refresh:function(){n("Warning: used emailtracking refresh before module init")}},leadHunter:{isEnabled:true,onBeforeAppear:null,onAfterAppear:null,onBeforeSubmit:null,onAfterSubmit:null,additionalNotifyEmail:null,form:{title:null,subTitle:null,thankYouText:null,buttonText:null,nameLabel:null,contactLabel:null,isNameRequired:false,autoShowTime:null,isNeedExplicitAgreement:false,}},page:{params:{}},proxyForms:{enabled:true,loaded:false,settings:[]}};var bx=function(cb){if(!bg.isVisitProcessed){bG.onVisitProcessed.push(cb)}else{cb()}};var bC=function(){bg.isVisitProcessed=true;n("[Roistat] visit id set. Processing callbacks");var cc=bG.onVisitProcessed.length;for(var cb=0;cb<cc;cb++){bG.onVisitProcessed[cb]()}if(bk.roistatVisitCallback!==aU){bk.roistatVisitCallback(bk.roistat.getVisit())}};var aL=function(cb){bG.onCallTrackingPhoneReceived.push(cb)};var bU=function(){var cc=bG.onCallTrackingPhoneReceived.length;for(var cb=0;cb<cc;cb++){bG.onCallTrackingPhoneReceived[cb]()}};var V=function V(cb){bG.onSPAPageChanged.push(cb)};var bc=function bc(){n("[Roistat] SPA page changed. Processing callbacks");var cc=bG.onSPAPageChanged.length;for(var cb=0;cb<cc;cb++){bG.onSPAPageChanged[cb]()}};var M=function(cf,ce){var cd=cf.className.split(" "),cc=false,cb;for(cb=0;cb<cd.length;cb++){if(cd[cb]===ce){cc=true;break}}if(!cc){cd.push(ce);cf.className=cd.join(" ")}};var bd=function(ce,cd){var cc=ce.className.split(" "),cb;for(cb=0;cb<cc.length;cb++){if(cc[cb]===cd){cc.splice(cb,1);ce.className=cc.join(" ");break}}};var Y=function(cc){try{return decodeURIComponent(cc)}catch(cd){var cb;cb=p(cc);if(cb===null){return cc}return cb}};var a5={visitor_uid:function(){n("AmoCrmUID: starting collecting AmoCRM visitor_uid");if(!ca(bk.AMOPIXEL_IDENTIFIER)||!A(bk.AMOPIXEL_IDENTIFIER.getVisitorUid)){n("AmoCrmUID: AMOPIXEL_IDENTIFIER not an object or 'getVisitorUid()' function not found");return null}var cb=AMOPIXEL_IDENTIFIER.getVisitorUid();if(!ao(cb)){n("AmoCrmUID: visitor_uid value must be a string");return null}return cb}};var X=function(){for(var cc in a5){var cb=a5[cc]();if(cb===null){continue}b0(cc,cb,bH)}};var aB=function(){return["_ym_uid","_ga"].concat(v(a5))};var p=function(cf){var ce={"%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FC":"%D1%8C","%FB":"%D1%8B","%FA":"%D1%8A","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D0":"%D0%A0","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DC":"%D0%AC","%DB":"%D0%AB","%DA":"%D0%AA","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF"};var cc="";var cd=0;while(cd<cf.length){var cb=cf.substring(cd,cd+3);if(Object.prototype.hasOwnProperty.call(ce,cb)){cc+=ce[cb];cd+=3}else{cc+=cf.substring(cd,cd+1);cd++}}try{return decodeURIComponent(cc)}catch(cg){return null}};bk.roistatVersion=B;var aP,bs=true,bw=s.location.href,aC="",ak="",aI=new Date().getTime(),bM=false,bA=bk.roistatPhonePrefix?bk.roistatPhonePrefix:"",b7=bk.roistatPhonePrefixBind?bk.roistatPhonePrefixBind:"",z=bk.roistatCalltrackingScripts&&bk.roistatCalltrackingScripts.join?bk.roistatCalltrackingScripts.join(","):"";var h,b0;h=bk.roistatGetCookie=function(cb){var cc=s.cookie.match(new RegExp("(?:^|; )"+cb.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return cc?Y(cc[1]):aU};b0=bk.roistatSetCookie=function(ce,cg,cd){cd=cd||{};var cc=cd.expires;if(typeof cc=="number"&&cc){var ci=new Date();ci.setTime(ci.getTime()+cc*1000);cc=cd.expires=ci}if(cc&&cc.toUTCString){cd.expires=cc.toUTCString()}cg=encodeURIComponent(cg);var cb=ce+"="+cg;for(var cf in cd){cb+="; "+cf;var ch=cd[cf];if(ch!==true){cb+="="+ch}}s.cookie=cb};var aT=function(cc,ce,cd){var cb=cc[ce];
cc[ce]=function(){if(cb){cb.apply(this,arguments)}cd.apply(this,arguments)}};var H=function(cd,cc,ce){if(cd.addEventListener){cd.addEventListener(cc,ce,false);return}var cb="on"+cc;if(cd.attachEvent){cd.attachEvent(cb,ce);return}if(cb in cd){aT(cd,cb,ce);return}if(cc in cd){aT(cd,cc,ce);return}n("Handler could not be attached")};var l=function(ce,cd){var cc=ce.length;for(var cb=0;cb<cc;cb++){cd(ce[cb])}};var v=function(cb){var cc=[];aH(cb,function(cd,ce){cc.push(cd)});return cc};var aH=function(cb,cd){for(var cc in cb){if(Object.prototype.hasOwnProperty.call(cb,cc)){cd(cc,cb[cc])}}};var aM=function(cb){return Object.prototype.toString.call(cb)==="[object Array]"};var ah=function(cc){if(typeof cc!=="object"){return false}for(var cb in cc){if(cc.hasOwnProperty(cb)){return true}}return false};var bW=function(cc){try{var cb=JSON.parse(cc);if(cb&&typeof cb==="object"){return cb}}catch(cd){}return null};if(s.getElementsByClassName==aU){s.getElementsByClassName=function(cc){var cb=[];var cg=new RegExp("\\b"+cc+"\\b");var cf=this.getElementsByTagName("*");for(var ce=0;ce<cf.length;ce++){var cd=cf[ce].className;if(cg.test(cd)){cb.push(cf[ce])}}return cb}}var Z=function(){return String.fromCharCode};var bD=function(cd){var cb="";for(var cc=0;cc<cd.length;++cc){cb+=Z()(bF^cd.charCodeAt(cc))}return cb};var ae=function(cb){return encodeURIComponent(bD(bn.encode(cb)))};var bn={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(cd){var cb="";var ck,ci,cg,cj,ch,cf,ce;var cc=0;cd=bn._utf8_encode(cd);while(cc<cd.length){ck=cd.charCodeAt(cc++);ci=cd.charCodeAt(cc++);cg=cd.charCodeAt(cc++);cj=ck>>2;ch=((ck&3)<<4)|(ci>>4);cf=((ci&15)<<2)|(cg>>6);ce=cg&63;if(isNaN(ci)){cf=ce=64}else{if(isNaN(cg)){ce=64}}cb=cb+this._keyStr.charAt(cj)+this._keyStr.charAt(ch)+this._keyStr.charAt(cf)+this._keyStr.charAt(ce)}return cb},decode:function(cd){var cb="";var ck,ci,cg;var cj,ch,cf,ce;var cc=0;cd=cd.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(cc<cd.length){cj=this._keyStr.indexOf(cd.charAt(cc++));ch=this._keyStr.indexOf(cd.charAt(cc++));cf=this._keyStr.indexOf(cd.charAt(cc++));ce=this._keyStr.indexOf(cd.charAt(cc++));ck=(cj<<2)|(ch>>4);ci=((ch&15)<<4)|(cf>>2);cg=((cf&3)<<6)|ce;cb=cb+String.fromCharCode(ck);if(cf!=64){cb=cb+String.fromCharCode(ci)}if(ce!=64){cb=cb+String.fromCharCode(cg)}}cb=bn._utf8_decode(cb);return cb},_utf8_encode:function(cc){cc=cc.replace(/\r\n/g,"\n");var cb="";for(var ce=0;ce<cc.length;ce++){var cd=cc.charCodeAt(ce);if(cd<128){cb+=String.fromCharCode(cd)}else{if((cd>127)&&(cd<2048)){cb+=String.fromCharCode((cd>>6)|192);cb+=String.fromCharCode((cd&63)|128)}else{cb+=String.fromCharCode((cd>>12)|224);cb+=String.fromCharCode(((cd>>6)&63)|128);cb+=String.fromCharCode((cd&63)|128)}}}return cb},_utf8_decode:function(cb){var cd="";var cf=0;var cg=0;var ce=0;var cc=0;while(cf<cb.length){cg=cb.charCodeAt(cf);if(cg<128){cd+=String.fromCharCode(cg);cf++}else{if((cg>191)&&(cg<224)){ce=cb.charCodeAt(cf+1);cd+=String.fromCharCode(((cg&31)<<6)|(ce&63));cf+=2}else{ce=cb.charCodeAt(cf+1);cc=cb.charCodeAt(cf+2);cd+=String.fromCharCode(((cg&15)<<12)|((ce&63)<<6)|(cc&63));cf+=3}}}return cd}};var aR=function(){return s[Z()(99,111,111,107,105,101)]};var R=function(){b3();var cb={c:bR()};return ae(JSON.stringify(cb))};var by=function(){var cb=k();return(cb===aU||cb===null)?bq:cb};var bR=function(){var cb=[];for(var cc in bg.cookies){if(!Object.prototype.hasOwnProperty.call(bg.cookies,cc)){continue}cb.push(cc+"="+bg.cookies[cc])}return cb.join("; ")};var b3=function(){var cb=i();for(var cc in cb){if(!Object.prototype.hasOwnProperty.call(cb,cc)){continue}bg.cookies[cc]=cb[cc]}};var Q=function(cb){b0(bN,cb,bH);bg.source.marker=cb};var N=function(){return h(bN)};var e=function(){aH(bk.roistat.page.params,function(cc,cb){bg.pageParams[cc]=cb})};var i=function(){var ce=aR();var cf=ce.split("; ");var cb={};for(var cd=0;cd<cf.length;cd++){var ci=cf[cd];if(ci===""){continue}var cc=ci.split("=");if(cc.length<2){continue}var ch=cc[0].trim();var cg=cc[1].trim();cb[ch]=cg}return cb};var f=function(){return Z()(104,97,115,104)};var af=function(cb){return cb.split("http://").join("").split("https://").join("").split("#")[0].split("?")[0].split("www.").join("").replace(/\/+$/,"")};var bb={isAvailable:function(){var cb=false;if(!bk.sessionStorage||!bk.sessionStorage.setItem||!bk.sessionStorage.getItem||!bk.sessionStorage.removeItem){return cb}try{bk.sessionStorage.setItem("testKey","testValue");cb=bk.sessionStorage.getItem("testKey")==="testValue";bk.sessionStorage.removeItem("testKey")}catch(cc){return false}return cb},remove:function(cb){if(this.isAvailable()){bk.sessionStorage.removeItem(cb)}},setObject:function(cb,cc){if(this.isAvailable()){bk.sessionStorage.setItem(cb,JSON.stringify(cc))}},getObject:function(cc){var cb=null;if(this.isAvailable()){cb=bk.sessionStorage.getItem(cc);cb=JSON.parse(cb)}return cb},set:function(cb,cc){if(this.isAvailable()){bk.sessionStorage.setItem(cb,cc)}},get:function(cc){var cb=null;if(this.isAvailable()){cb=bk.sessionStorage.getItem(cc)
}return cb}};var bi={isAvailable:function(){var cb=false;if(!bk.localStorage||!bk.localStorage.setItem||!bk.localStorage.getItem||!bk.localStorage.removeItem){return cb}try{bk.localStorage.setItem("testKey","testValue");cb=bk.localStorage.getItem("testKey")==="testValue";bk.localStorage.removeItem("testKey")}catch(cc){return false}return cb},remove:function(cc){if(this.isAvailable()){bk.localStorage.removeItem(cc)}else{var cb=new Date(1970,1,1);b0(cc,"",{expires:cb.toUTCString()})}},setObject:function(cb,cc){if(this.isAvailable()){localStorage.setItem(cb,JSON.stringify(cc))}},getObject:function(cc){var cb=null;if(this.isAvailable()){cb=localStorage.getItem(cc);cb=JSON.parse(cb)}return cb},set:function(cb,cc){if(this.isAvailable()){localStorage.setItem(cb,cc)}else{b0(cb,cc,bH)}},save:function(cc,cd,cb){if(this.isAvailable()){localStorage.setItem(cc,cd)}b0(cc,cd,cb)},get:function(cc){var cb=null;if(this.isAvailable()){cb=localStorage.getItem(cc)}if(cb===null){cb=h(cc)}return cb}};var a9=function(){var cb=null;var cc=bi.get(aa);var cd=ao(cc)?cc:s.referrer;if(cd){cb=cd}return cb};var A=function(cb){return typeof cb==="function"};var ca=function(cb){return typeof cb==="object"};var ao=function(cb){return typeof cb==="string"};var D=function(ce,cd){cd=typeof cd!=="undefined"?cd:false;var cf=function(ci){var ch=null;var cj=new RegExp("[#&?]("+ce+"=[^#&?]+)");if(cj.test(ci)){ch=RegExp.$1.substring(RegExp.$1.indexOf("=")+1)}var cg=Y(ch);return ch&&cg?cg:ch};var cb=cf(bw);if(cd){var cc=s.referrer;if(cb===null&&cc){cb=cf(cc)}}return cb};var bS=function(cc,cd){var cb=false;if(cc&&cd){cb=cc.split(cd).join("")!==cc}return cb};if(D(bf)==="1"||i()[bf]==="1"){aK=true}var ax=function(){if("https:"===s.location.protocol){return"https:"}else{return"http:"}};var bv=function(cc,ch,ci){var ce=s.createElement("iframe");var cg="roistat_"+new Date().getTime();s.body.appendChild(ce);ce.style.display="none";ce.setAttribute("name",cg);ce.setAttribute("id",cg);ce.contentWindow.name=cg;var cf=s.createElement("form");cf.target=cg;cf.action=cc;cf.method=ci;for(var cd in ch){if(!Object.prototype.hasOwnProperty.call(ch,cd)){continue}var cb=s.createElement("input");cb.type="hidden";cb.name=cd;cb.value=ch[cd];cf.appendChild(cb)}s.body.appendChild(cf);cf.submit()};var al=function(cc){n("sendApiRequestJSONP: init with url "+cc);var cb=s.createElement("script");cb.onload=cb.onreadystatechange=function(){var ce=this.readyState?this.readyState:"unknown";n("sendApiRequestJSONP: script state changed to "+ce)};cb.src=cc;cb.type="text/javascript";cb.async=true;var cd=s.getElementsByTagName("script")[0];cd.parentNode.insertBefore(cb,cd);n("sendApiRequestJSONP: script appended")};var bu=function(){var cc=s.createElement("link"),cb=s.getElementsByTagName("head");cc.setAttribute("rel","stylesheet");cc.setAttribute("href",ax()+"//"+o+"/dist/module.css?"+B);if(cb.length>0){cb[0].appendChild(cc)}};var bo=function(){return br()||b8()};var br=function(){return aD()!==null};var b8=function(){return bl()!==null};var bL=function(){var cb=bJ();if(cb!==null){b0(be,cb,bH)}};var bJ=function(){return aD()||bl()||null};var aD=function(){return D("roistat_visit")};var bl=function(){return bg.visitFromUser};var a=function(cb){if(bg.isSettingsUpdating||!s.hasFocus()){n("Already updating settings or document not in focus, return");return}var cc=x()+"/get-settings?v="+B+"&visit="+cb;n("Request new settings");bg.isSettingsUpdating=true;al(cc)};var ai=function(){return bi.get(ap)>0};var bX=function(){bi.set(ap,1)};var b4=function(){n("Call: Init");n("Counter version: "+B);if(D("roistat_ab_demo")==="1"){n("Roistat initialisation rejected: ab test preview mode");return}bu();aG();E();if(!O()||b9()){bM=true;aW()}else{bL();var cb=k();a1();au();bK();roistat.visit=cb;bg.source.marker=N();var cc=ai();if(!cc){a(cb)}else{bC()}}bV();L()};var aG=function(){n("Call: initMarker");aP=bp();n("Call: inited marker: "+aP)};var a8=function(cd){if(!cd){return true}var cb=av(cd);var cc=av(s.domain);if(cb===cc){return true}var ce=a6();if(ce===null){return false}if(bS(cb,ce)&&bS(cc,ce)){return true}return false};var a6=function(){if(typeof bH.domain==="string"&&bH.domain!==""){return av(bH.domain)}return null};var av=function(cb){var cc=cb.split("http://").join("").split("https://").join("").split("www.").join("");return cc.split("/")[0]};var bp=function(){var ce=h(g)>0;var ci=null;var cc=function(cj){return cj.split("_").join(":u:")};var cf=function(){var cj=false;var ck;ck=D(t,ce);if(ck!==null){ci=ck;cj=true}ck=D(bz,ce);if(ck!==null){ci=ck;cj=true}return cj};var ch=function(){var cj=false;var ck=N();if(ck){ci=ck;cj=true;bs=false}return cj};var cd=function(){var cj=false;var cl=D("utm_source",ce);if(cl!==null){cj=true;ci=":utm:"+cc(cl);var cn=["utm_medium","utm_campaign","utm_content","utm_term"];var ck;for(var cm=0;cm<cn.length;cm++){ck=D(cn[cm],ce);if(ck!==null){ci=ci+"_"+cc(ck)}}}return cj};var cg=function(){var cl,ck,cj=false;ck=D("_openstat",ce);if(!ck){return false}if(bS(ck,";")){cl=ck}else{cl=encodeURI(bn.decode(ck))
}if(cl){cl=cc(cl).split(";").join("_");ci=":openstat:"+cl;cj=true}return cj};var cb=function(){var cj=false;var ck=s.referrer;if(a8(ck)){return cj}var cl=D("from",ce);if(cl!==null&&!bS(cl,"http")){cj=true;ci=cc(cl)}return cj};if(cf()){n("Init marker: init from RS param "+ci);return ci}if(cd()){n("Init marker: init from UTM "+ci);return ci}if(cg()){n("Init marker: init from OpenStat "+ci);return ci}if(cb()){n("Init marker: init from custom tag "+ci);return ci}n("Init marker: try init from cookie "+ci);ch();return ci};var k=function(){return bi.get(be)};var E=function(){n("Call: saveReferrer");var cb=s.referrer;if(a8(cb)){return}bi.set(aa,cb)};var bV=function(){b0(aA,Y(aP),bH)};var L=function(){bi.set(bQ,a9())};var bK=function(){n("Call: refreshPromoCode");var cb=function(){return h(be)};U(cb());if(!bk.onload){bk.onload=function(){U(cb())}}setTimeout(function(){U(cb())},50);setTimeout(function(){U(cb())},200);setTimeout(function(){U(cb())},2000);setTimeout(function(){U(cb())},10000)};bk.roistatPromoCodeRefresh=bK;var bY=function(){var cb=[];var cc=s.getElementsByClassName(J);if(cc&&cc.length){cb=cc}return cb};var U=function(cb){var ce=bY();n("setPromoCode: "+cb+" in "+ce.length+" elements");for(var cd=0;cd<ce.length;cd++){var cc=ce[cd];cc.innerHTML=cb?cb:""}};var aY=function(){var cd=bp(),cc=h(aA),cf=cd!==null,ce=true;var ch=Y(Y(cd)).toLowerCase().split("+").join(" "),cg=Y(Y(cc)).toLowerCase().split("+").join(" ");if(cd&&cc){ce=ch!==cg}var cb=cf&&ce;ak="Call: needOverrideByMarker (result "+(cb?"true":"false")+") with current "+cd+":"+ch+" and old "+cc+":"+cg;n(ak);return cb};var ad=function(){var cc=function(ck){return/[\u0400-\u04FF]/.test(ck)};var cj=false,cg=a9(),cb=bi.get(bQ),ci=bk.location.host;if(!cg||!ci){n("Call: needOverrideByReferrer (result "+(cj?"true":"false")+"), skip because one of params is empty");return cj}ci=av(ci);cg=Y(cg);cb=Y(cb);var ce=av(cg);if(bS(cg,"xn--")&&cc(ci)){n("Call: needOverrideByReferrer (result "+(cj?"true":"false")+"), skip because of bugs with punycode in FF");return cj}if(!ce){n("Call: needOverrideByReferrer (result "+(cj?"true":"false")+"), skip because current referrer is null");return cj}if(!cb){cj=!bS(ce,ci);n("Call: needOverrideByReferrer (result "+(cj?"true":"false")+"), compare current referrer and host");return cj}if(bS(cg,cb)){n("Call: needOverrideByReferrer (result "+(cj?"true":"false")+"), skip because the same referrer");return cj}var ch=ci.split(".").length>2&&ce.split(".").length>2;var cf=bk.roistatCookieDomain!==aU&&bk.roistatCookieDomain!==ci;var cd=ce.split(".").slice(1).join(".")===ci.split(".").slice(1).join(".");if(ch&&cf&&cd){n("Call: needOverrideByReferrer (result "+(cj?"true":"false")+"), skip because sub domains of same domain");return cj}cj=!(bS(ce,ci)||(bS(ci,ce)));n("Call: needOverrideByReferrer (result "+(cj?"true":"false")+") referrerHost: "+ce+", currentHost: "+ci);return cj};var a2=function(){return D("utm_nooverride")==="1"};var b9=function(){return !bo()&&!a2()&&(aY()||ad())};var a3=function(cc,cb){return(cc&&cb&&cc!=cb)};var ay=function(cd){var cb=["cookieExpire"];var cf=cd.leadHunterEnabled;if(!cf){if(bi.get(aV)>0){bi.set(aV,0)}}else{var ce={expires:y,path:"/"};if(bH.domain){ce.domain=bH.domain}b0(F,1,ce)}for(var cc in cd){if(!Object.prototype.hasOwnProperty.call(cd,cc)){continue}if(!cf&&cc.indexOf("leadHunter")>=0){continue}if(!T(cb,cc)){bi.set("roistat_"+cc,cd[cc])}}};var b5=function(cc,ce,cb,cd){ay(cc);roistat.callTracking.enabled=ce.enabled;roistat.emailtracking.loaded=true;roistat.emailtracking.email=cb.email;roistat.emailtracking.trackingEmail=cb.trackingEmail;roistat.emailtracking.emails=cb.emails;roistat.proxyForms.loaded=true;roistat.proxyForms.settings=cd};bk.roistatModuleSetVisitCookie=function(cf,cl,ce,cc,ck,cb){n("Call: roistatModuleSetVisitCookie("+cf+")");var ch;if(typeof ce.cookieExpire!=="number"){ch=d}else{ch=ce.cookieExpire}var cg=h(be);var cj={expires:ch,path:"/"};if(bH.domain){cj.domain=bH.domain}b0(be,cf,cj);if(!(h(be)>0)){bi.save(be,cf,cj)}if(!bi.get(am)){var cd={expires:10*365*24*60*60,path:"/"};if(bH.domain){cd.domain=bH.domain}bi.save(am,cf,cd)}var ci=ce.abTests;if((typeof ci!=="undefined")&&bi.isAvailable()){bi.setObject("abTesting",ci)}applyTests();U(cf);if(cl){Q(cl);b0(aA,cl,bH)}n("Call: pre renderPromoCode");au();bK();if(a3(cg,cf)){n("roistatModuleSetVisitCookie: visit changed from "+cg+" to "+cf)}if(bk.roistatCallback!==aU){bk.roistatCallback(cf,cl)}b5(ce,cc,ck,cb);roistat.callTracking.phone=cc.phone;roistat.callTracking.sessionTime=cc.sessionTime;roistat.callTracking.replacementClasses=cc.replacementClasses;roistat.callTracking.phoneScriptsJson=cc.scripts;roistat.visit=cf;bU();bX();bC()};bk.roistatUpdateSettings=function(cb){n("Set settings.");bg.isSettingsUpdating=false;b5(cb.js_settings,cb.calltracking,cb.emailtracking,cb.proxy_forms);bX();bC()};var O=function(){var cb;if(bk.roistatIsInitVisit===true){cb=false}else{cb=h(be)>0}n("Call: alreadyVisited (return "+(cb?"true":"false")+")");return cb};var c=function(cb){return encodeURIComponent?encodeURIComponent(cb):encodeURI(cb)
};var ar=function(){var cb=a9();return cb?c(cb):""};var at=function(){return bk.roistatProjectId};var x=function(){return ax()+"//"+o+"/api/site/"+I+"/"+at()};var bt=function(){var cb={expires:1,path:"/"};if(bH.domain){cb.domain=bH.domain}b0(aQ,"",cb)};var aW=function(){n("Call: setVisitIdCookie");var cc=function(){var ck=at(),ch=ar(),ce=bk.roistatIsInitVisit===true?k():0,cj=h(aQ),cf=bi.get(am);cj=cj?cj:"";cf=cf?cf:"";aP=aP&&(!ad()||bs)?Y(Y(aP)):"";var ci=encodeURIComponent(bw);n("Calltracking: enabled="+a7.callTrackingEnabled+",manual="+a7.callTrackingManual);var cg=JSON.stringify(bk.roistat.page.params);return x()+"/addVisit?v="+B+"&marker="+encodeURIComponent(aP)+"&visit="+ce+"&first_visit="+cf+"&phone_prefix="+bA+"&phone_prefix_bind="+b7+"&phone_scripts_bind="+z+"&referrer="+ch+"&page="+ci+"&ab="+c(cj)+"&"+f()+"="+R()+(cg==="{}"?"":"&page_params="+encodeURIComponent(cg))+((!a7.callTrackingEnabled||a7.callTrackingManual)?"&call_tracking_disabled=1":"")};var cb=function(ce){setTimeout(function(){n("Call: setVisitIdCookie script creation after timeout");var cf=s.createElement("script");cf.onload=cf.onreadystatechange=function(){var ch=this.readyState?this.readyState:"unknown";n("Call: setVisitIdCookie script state changed to "+ch)};cf.src=ce;cf.type="text/javascript";cf.async=true;cf.id=C;var cg=s.getElementsByTagName("script")[0];cg.parentNode.insertBefore(cf,cg);n("Call: setVisitIdCookie appended "+((s.getElementById(C))?"true":"false"));n("Call: sendJSONPRequest to URL "+ce);bt()},a7.jsonpRequestTimeout)};if(aP){Q(aP)}X();var cd=cc();cb(cd)};var a1=function(){n("Call: sendAbTests");var cc=function(){var cg=at(),cf=h(be);return ax()+"//"+o+"/site-api/"+ab+"/"+cg+"/visit/"+cf+"/addAbVariant"};var cd=h(aQ);if(!cd){return}var ce=cc();ce=ce+"?ab="+c(cd);var cb=s.createElement("img");cb.src=ce;bt()};var aj={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return(aj.Android()||aj.BlackBerry()||aj.iOS()||aj.Opera()||aj.Windows())}};var aq={isIE:function(ce,cg){var ch="IE",cd=s.createElement("B"),cb=s.documentElement,cf;if(ce){ch+=" "+ce;if(cg){ch=cg+" "+ch}}cd.innerHTML="<!--[if "+ch+']><b id="iecctest"></b><![endif]-->';cb.appendChild(cd);cf=!!s.getElementById("iecctest");cb.removeChild(cd);return cf}};var bm=function(){return new Date().getTime()};var G=function(){var cb="";bk.onerror=function(ch,cg,cd,cf,ce){var cc=!cf?"":", column: "+cf;cc+=!ce?"":", error: "+ce;cb=cb+", Error: "+ch+", url: "+cg+", line: "+cd+cc};setTimeout(function(){var cj=false,ck="";var cf=bY();for(var ci=0;ci<cf.length;ci++){var ce=cf[ci];if(ce!==null&&!ce.innerHTML){cj=true;ck="Promo HTML: "+ce.innerHTML}}if(!(h(be)>0)){cj=true;ck=ck+"; roistat_visit = "+h(be)}if(cj){var cd=s.getElementById(C);var cc=cd?1:0;var cg=bk.navigator.userAgent;ck=encodeURIComponent(ck);var ch=s.createElement("img");ch.src=ax()+"//"+o+"/site-api/"+ab+"/"+at()+"/debug?message="+ck+"&agent="+cg+"&"+f()+"="+R()+"&jserror="+cb+"&scriptResponse="+cc+"&version="+B+"&debug="+aC}},20000)};var aS=function(){var cd=s.getElementsByTagName("body");var ce=s.documentElement;var cc=0,cf=0;if(cd.length){var cb=cd[0];cc=bk.innerWidth||ce.clientWidth||cb.clientWidth;cf=bk.innerHeight||ce.clientHeight||cb.clientHeight}else{cc=bk.innerWidth||ce.clientWidth;cf=bk.innerHeight||ce.clientHeight}return{width:cc,height:cf}};var au=function(){var cg=s.getElementsByClassName("roistat-promo-wrap");if(cg.length){n("PromoCode: old promo code length - exit");return}var ce=function(){var cn=s.createElement("div");cn.innerHTML=roistatPromoCode;var cl=s.getElementsByTagName("body");if(cl.length){cl[0].appendChild(cn)}n("PromoCode: appended to body "+roistatPromoCode.length);var cm=s.getElementsByClassName("roistat-promo-wrap")[0];if(!cm){n("PromoCode: roistat-promo-wrap not found, skip");return}var ck=cm.style;var ci,cj,ch;setInterval(function(){ci=aS();cj=cm.offsetWidth;ch=cm.offsetHeight*2;switch(roistatPosition){case"top_left":ck.left=0;ck.top=0;break;case"top":ck.left=((ci.width-cj)/2)+"px";ck.top=0;break;case"top_right":ck.right=0;ck.top=0;break;case"left":ck.left=0;ck.top=((ci.height-ch)/2)+"px";break;case"right":ck.right=0;ck.top=((ci.height-ch)/2)+"px";break;case"bottom_left":ck.left=0;ck.bottom=0;break;case"bottom":ck.left=((ci.width-cj)/2)+"px";ck.bottom=0;break;case"bottom_right":ck.right=0;ck.bottom=0;break;default:ck.left=0;ck.top=0}},500)};var cb=bi.getObject("promo_code_options");if(cb){bk.roistatPromoCode=cb.template;bk.roistatPosition=cb.position;ce()}else{var cf=s.getElementsByTagName("head")[0]||s.documentElement;var cd=s.createElement("script");cd.src=ax()+"//"+o+"/site-api/"+ab+"/"+at()+"/getPromoCode";cf.insertBefore(cd,cf.firstChild);n("PromoCode: loading started");var cc=false;
cd.onload=cd.onreadystatechange=function(){if(!cc&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){cc=true;cd.onload=cd.onreadystatechange=null;if(cf&&cd.parentNode){cf.removeChild(cd)}}if(!cc){return}n("PromoCode: loaded");if(typeof roistatPromoCode==="undefined"||roistatPromoCode.length<1){n("PromoCode: is disabled");return}cb={template:roistatPromoCode,position:roistatPosition};bi.setObject("promo_code_options",cb);ce()}}};var T=function(cc,cd){for(var cb=0;cb<cc.length;cb++){if(cc[cb]===cd){return true}}return false};var n=function(cc){var cd=bm()-aI;var cb="["+(cd/1000)+"s] "+cc;aC=aC+"; "+cb;if(typeof console!=="undefined"&&console.log&&aK){console.log(cb)}};var ac=function ac(){H(bk,"popstate",function cd(){n("[Roistat]: popstate event catch");bc()});H(bk.history,"pushState",function cc(){n("[Roistat]: pushState event catch");bc()});H(bk.history,"replaceState",function cb(){n("[Roistat]: replaceState event catch");bc()})};(function aZ(){ac();if(bk.onRoistatModuleLoaded!==aU&&typeof bk.onRoistatModuleLoaded==="function"){bk.onRoistatModuleLoaded()}})();b4();(function aw(){var dJ="roistat-lh-form",cu="roistat-lh-form",dL="roistat-lh-head-text",cI="roistat-lh-head",cs="roistat-lh-thank-you",c8="roistat-lh-thank-you",ce="roistat-lh-close",cf="roistat-lh-submit",cR="roistat-lh-hidden",dt="roistat-lh-wrap",cw="roistat-lh-popup-wrapper",c7="roistat-lh-popup",dI="roistat-lh-popup-iframe",dK="roistat-lh-agreement",c2="roistat-lh-agreement roistat-lh-mobile",dW="roistat-lh-agreement-input",dB="roistat-lh-agreement-link",cb="roistat-lh-agreement-doc",dF="roistat-lh-alert-row",de="roistat-lh-agreement",c1="roistat-lh-popup-iframe",dg="roistat_leadHunterUrl",dD="roistat_leadHunterAppearanceUrl",cU="roistat_leadHunterTargetPagesList",cq="roistat_leadHunterCaught",cA="roistat_leadHunterFormTemplate_{version}",dm=17,cJ="roistat_leadHunterPulsatorTemplate",dl="roistat_leadHunterMinTime",cM="roistat_leadHunterAutoShowTime",dj="roistat_leadHunterPulsatorEnabled",cZ="roistat-lh-load-done",cv="roistat-lh-close-modal",du="roistat-lh-setting-size",dG="roistat-lh-before-submit",dh="roistat-lh-before-submit-done",dN="roistat-lh-after-submit",dx="roistat-lh-event-data";var cp=0.3,cB=0.001,ct=false,cE=0,cy=0,cF=0,dO=0,cD=0,c4=false,cS=false,ci=false,cC,df,ds,cH,dV,dR,dC,dU,cl,dP,dq,da,c0,co,cd,cQ,cG,cN;var dS={pulsator:{previousClass:""},leave:{isShowEnabled:false,},timeoutId:0};var cz=function(){return cA.split("{version}").join(dm)};var dM=function(d2){var d1=encodeURIComponent?encodeURIComponent:encodeURI;return d1(d2)};var cr=function(){if(!bi.isAvailable()){return}bi.remove(cA.split("_{version}").join(""));var d1;if(dm>1){for(d1=1;d1<dm;d1++){bi.remove(cA.split("{version}").join(d1.toString()))}}};var dw=function(){if(!bk.roistat.leadHunter.isEnabled){return false}if(bk.roistatLeadHunterInited){return false}bk.roistatLeadHunterInited=true;if(bi.get(aV)<1){n("LeadHunter: disabled");return false}return true};var cP=function(){cd=bi.get(dg);if(!cd){n("LeadHunter: not active cause of empty url");return false}cQ=bi.get(dD);dO=bi.get(dl);cD=bk.roistat.leadHunter.form.autoShowTime===null?bi.get(cM):bk.roistat.leadHunter.form.autoShowTime;c4=bi.get(dj)==1;cc();return true};var cc=function(){if(bi.get(cq)>0){n("LeadHunter: not active because already caught");cS=true}if(!(h(F)>0)){n("LeadHunter: not active, expired for this visit");cS=true}};var d0=function(){var d7=function(ee,ec){var eb;if(bS(ec,"*")){var ed=new RegExp(ec.split("*").join(".*"));eb=ed.test(ee)}else{eb=ee===ec}n("LeadHunter: compare current: "+ee+", setting: "+ec+" with result = "+(eb?1:0));return eb};var d2=bi.get(cU),d1=bk.location.href,d4=false,d3=false,d9="",d5=0,d8;d8=d2?d2.split(","):[];if(!d1||d8.length===0){d4=true}else{d9=af(d1);var ea;for(var d6=0;d6<d8.length;d6++){ea=d8[d6].split("www.").join("").split("http://").join("").split("https://").join("").replace(/\/+$/,"");if(/^!/.test(ea)){if(d7(d9,ea.split(/^!/).join(""))){d3=true;break}}else{d5++;if(d7(d9,ea)){d4=true;break}}}}if(d3){n('LeadHunter: current page "'+d9+'" is disabled by list');return false}if(!d4&&d5>0){n('LeadHunter: current page "'+d9+'" is not listed');return false}n('LeadHunter: current page "'+d1+'", cleaned: "'+d9+'" is not disabled in '+d8.length+" list of pages");return true};var cj=function(){var d1=s.getElementById(c1);if(d1!==aU&&d1!==null){cN=d1.src;var d2={version:B,additionalNotifyEmail:bk.roistat.leadHunter.additionalNotifyEmail,projectKey:at(),visitId:by(),moduleTargetOrigin:bk.location.origin,referrer:bk.location.href,windowWidth:bk.innerWidth||0,iframeWrapperWidth:df.offsetWidth||0,sendRequestUrl:bi.get(dg),message:cZ,};d1.contentWindow.postMessage(d2,cN)}};var cY=function(){ci=true;ch("click");cj();dr()};var cg=function(){var d1=bk.location.hash;if(!d1){return}if(bS(d1,"roistat-lead-hunter")){cY()}};var cW=function cn(){n("LeadHunter: binding timeout");if(cS){n("LeadHunter: leadhunter is expired, no timeout show allowed");return}if(ct){n("LeadHunter: leadhunter was shown, no timeout show allowed");
return}if(cD>0){var d1=(cE-bm())+cD*1000;n("LeadHunter: binding timeout with delay "+d1+" ms");clearTimeout(dS.timeoutId);dS.timeoutId=setTimeout(function(){n("LeadHunter: form auto activate with autoTime = "+cD);if(!ct){ci=true;ch("auto");cj();dr()}},d1)}else{n("LeadHunter: auto show time is not positive, feature disabled")}};var dZ=function(d3,d2,d1){if(d3.addEventListener){d3.addEventListener(d2,d1,false)}else{if(d3.attachEvent){d3.attachEvent("on"+d2,d1)}else{n("Handler could not be attached")}}};var dE=function(){dC.onclick=ds.onclick=dc;dU.onclick=cT;if(dP){dZ(dP,"click",c3)}if(dq){dZ(dq,"change",dX)}var d2=s.getElementsByClassName("roistat-lh-input");for(var d5=0;d5<d2.length;d5++){dZ(d2[d5],"keyup",function(d7){d7=d7||event;var d6=(d7.keyCode?d7.keyCode:d7.which);if(d6==13){cT()}})}var d3=bk.onresize;bk.onresize=function(d6){if(d3){d3(d6)}dH(d6)};if(!cS){var d1=s.onmouseout;s.onmouseout=function(d6){if(d1){d1(d6)}dp(d6)}}if(c4){cC.onmouseover=function(){M(cC,"roistat-lh-pulsator-hover")};cC.onmouseout=function(){bd(cC,"roistat-lh-pulsator-hover")};cC.onclick=function(){cY()}}var d4=bk.onhashchange;bk.onhashchange=function(){if(d4){d4.apply(this,arguments)}cg()}};var dT=function(){if(c4){cC.onmouseover=function(){M(cC,"roistat-lh-pulsator-hover")};cC.onmouseout=function(){bd(cC,"roistat-lh-pulsator-hover")};cC.onclick=function(){cY()}}ds.onclick=dc;var d3=s.getElementById(c1);dZ(d3,"load",function(){cj();dQ()});var d2=bk.onresize;bk.onresize=function(d5){if(d2){d2(d5)}dH(d5)};if(!cS){var d1=s.onmouseout;s.onmouseout=function(d5){if(d1){d1(d5)}dp(d5)}}var d4=bk.onhashchange;bk.onhashchange=function(){if(d4){d4.apply(this,arguments)}cg()}};var db=function(d2){var d1=s.getElementsByClassName(d2);if(d1.length>0){return d1[0]}else{return null}};var c9=function(){var d4=db("roistat-lh-title");if(d4&&roistat.leadHunter.form.title){d4.innerHTML=roistat.leadHunter.form.title}var d2=db("roistat-lh-sub-title");if(d2&&roistat.leadHunter.form.subTitle){d2.innerHTML=roistat.leadHunter.form.subTitle}var d3=db("roistat-lh-thank-you");if(d3&&roistat.leadHunter.form.thankYouText){d3.innerHTML=roistat.leadHunter.form.thankYouText}var d6=db("roistat-lh-submit");if(d6&&roistat.leadHunter.form.buttonText){d6.value=roistat.leadHunter.form.buttonText}var d5=db("roistat-lh-text-label-name");if(d5&&roistat.leadHunter.form.nameLabel){d5.innerHTML=roistat.leadHunter.form.nameLabel}var d1=db("roistat-lh-text-label-contact");if(d1&&roistat.leadHunter.form.contactLabel){d1.innerHTML=roistat.leadHunter.form.contactLabel}};var cx=function(d2,d4){var d1;if(!d2){n("LeadHunter: deactivating, empty form")}else{n("LeadHunter: rendering hidden form")}if(bi.isAvailable()){dy(d2,d4)}ds=s.createElement("div");df=s.createElement("div");df.innerHTML=d2;ds.className=cR;df.className=cR;if(d4&&c4){d1=s.createElement("div");d1.innerHTML=d4;cC=d1.childNodes.item(0);dS.pulsator.previousClass=cC.className;cC.className=cR;s.body.appendChild(cC)}s.body.appendChild(ds);s.body.appendChild(df);cH=s.getElementById(cI);dV=s.getElementById(cu);dR=s.getElementById(c8);dC=s.getElementById(ce);dU=s.getElementById(cf);cl=s.getElementById(dK);dq=s.getElementById(dW);dP=s.getElementById(dB);da=s.getElementById(cb);c0=s.getElementById(dF);co=s.getElementById(de);var d3=db(cw);cG=d3&&d3.getAttribute("data-is-iframe");if(cG){dT()}else{c9();dE();cg();dQ()}};var cm=function(){var d1=bi.get(cz()),d2=bi.get(cJ);bk.roistatLeadhunterForm=cx;if(!d1){n("LeadHunter: requesting form from server");al(ax()+"//"+o+"/api/site/"+I+"/"+at()+"/leadhunter-form?domain="+encodeURIComponent(s.domain))}else{bk.roistatLeadhunterForm(bn.decode(d1),bn.decode(d2))}};var cV=function(){var d2=df.clientWidth,d1=df.clientHeight;df.setAttribute("style",df.getAttribute("style")+" width: "+d2+"px; height: "+d1+"px;");if(dV!==null){dV.className=cR}if(cH!==null){cH.className=cR}if(cl!==null){cl.className=cR}if(dR!==null){dR.setAttribute("style","width: "+d2+"px; height: "+d1+"px; display: table-cell;");dR.className=cs}setTimeout(function(){n("LeadHunter: close form after timeout");dc()},7000)};var dr=function(){var d2=Math.round((dA()-df.clientHeight)/2);var d1=Math.round((dY()-df.clientWidth)/2);df.setAttribute("style","left: "+d1+"px; top: "+Math.max(0,d2)+"px;")};var ch=function(d1){if(bk.roistat.leadHunter.onBeforeAppear){n("LeadHunter: process user defined onBeforeAppear");bk.roistat.leadHunter.onBeforeAppear(d1);if(cG){dk()}}df.setAttribute("style","left:20px;top:-20px;opacity:0");ds.className=dt;df.className=c7;if(dV!==null){dV.className=dJ}if(cH!==null){cH.className=dL}if(cl!==null){cl.className=c2}if(dR!==null){dR.setAttribute("style","");dR.className=cR}ds.setAttribute("style","opacity:0;");ct=true;setTimeout(function(){ds.setAttribute("style","opacity:.5;")},10);var d2=h(be);bv(cQ,{visit_id:d2},"GET");if(bk.roistat.leadHunter.onAfterAppear){n("LeadHunter: process user defined onAfterAppear");bk.roistat.leadHunter.onAfterAppear(d2,ds,df,dV);if(cG){dk()}}};var dv=function dd(){cr();cE=bm();var d1=false;
var d2=bk.onload;bk.onload=function(){if(d2){d2()}if(!d1){d1=true;n("LeadHunter: form initialized in window.onload");cm()}};setTimeout(function(){if(!d1){d1=true;n("LeadHunter: form initialized after timeout");cm()}},5000)};var dQ=function cX(){n("LeadHunter: tuning appearance for page");if(!d0()){n("LeadHunter: disabled on page");dS.leave.isShowEnabled=false;clearTimeout(dS.timeoutId);if(cC){cC.className=cR}}else{n("LeadHunter: enabled on page");dS.leave.isShowEnabled=true;cW();if(cC){cC.className=dS.pulsator.previousClass}}};var cK=function dn(){n("LeadHunter: processing single page application state change");cE=bm();dQ()};var dz=function c5(){V(cK);H(bk,"message",function d1(d5){var d4=typeof d5.data==="string"?d5.data:d5.data.message,d2=s.getElementById(c1);if(d4===cv){dc()}if(d4===du){d2.width=d5.data.width;d2.height=d5.data.height;dH()}if(d4===dG){var d6=d5.data.caughtLeadData;if(bk.roistat.leadHunter.onBeforeSubmit){n("LeadHunter: process user defined onBeforeSubmit");var d3=bk.roistat.leadHunter.onBeforeSubmit(d6);if(d3){d6=d3}}d2.contentWindow.postMessage({caughtLead:d6,message:dh},cN)}if(d4===dN){if(bk.roistat.leadHunter.onAfterSubmit){n("LeadHunter: process user defined onAfterSubmit");bk.roistat.leadHunter.onAfterSubmit({name:d5.data.name,phone:d5.data.phone})}}})};function dk(){var d1=s.getElementById(c1);if(d1!==aU&&d1!==null){cN=d1.src;var d2={apiData:bk.roistat.leadHunter.form,message:dx};d1.contentWindow.postMessage(d2,cN)}}function di(){if(!dw()){return}if(!cP()){return}n("LeadHunter: activated");dv();dz()}function dA(){return(bk.innerHeight?bk.innerHeight:s.documentElement.clientHeight==0?s.body.clientHeight:s.documentElement.clientHeight)}function dY(){return(bk.innerWidth?bk.innerWidth:s.documentElement.clientWidth==0?s.body.clientWidth:s.documentElement.clientWidth)}function dp(d3){d3=d3||event;cF=d3.clientY;var d1=cF/dA(),d5=cy>0&&cy>d1,d2=d1<cB,d4=(bm()-cE)>dO*1000;if(d5&&d2&&!ct&&d4&&dS.leave.isShowEnabled){n("LeadHunter: show modal with because move up ("+cy+" -> "+d1+") and in modal zone and show on leave enabled");ch("exit");cj();c6(d3)}if(d1<cp){cy=d1}}function dH(d1){if(ci){dr()}else{d1=d1||event;c6(d1)}}function c6(d3){var d1=d3.clientX-Math.round(df.clientWidth/2)||df.offsetLeft;d1=Math.max(20,Math.min(d1,dY()-df.offsetWidth-20));var d2=dY()-40>df.offsetWidth?"":"width:"+(df.offsetWidth-40)+"px;";df.setAttribute("style","left:"+d1+"px; top: 0px; "+d2)}function ck(){bk.roistatSetCookie(cq,1,bH)}function dc(){ck();ds.setAttribute("style","opacity:0");df.style.top="-"+df.offsetHeight*2+"px";setTimeout(function(){df.className=ds.className=cR},500)}function cT(){var ef=s.getElementById("roistat-lh-phone-input"),d3=s.getElementById("roistat-lh-name-input"),d5,ed;d5=ef===null?"":ef.value;ed=d3===null?"":d3.value;var ea={name:ed,phone:d5,isNeedCallback:null,callbackPhone:null,fields:{}};if(bk.roistat.leadHunter.onBeforeSubmit){n("LeadHunter: process user defined onBeforeSubmit");var d6=bk.roistat.leadHunter.onBeforeSubmit(ea);if(d6){ea=d6}}var ec=ea.phone.length<1;var ee=ea.phone.indexOf("_")===-1;var d8=!ec&&ee;var eb=ea.name.length<1;var d2=!eb||!bk.roistat.leadHunter.form.isNameRequired;if(!d8){ef.setAttribute("style","border: 2px solid #E0571A;");return}if(!d2){d3.setAttribute("style","border: 2px solid #E0571A;");return}var d1=cd+"?v="+B+"&lead-hunt-input="+encodeURIComponent(ea.phone)+"&lead-name="+encodeURIComponent(ea.name)+"&visit="+by();if(ea.isNeedCallback!==null&&ea.isNeedCallback!==aU){d1=d1+"&is_need_callback="+(ea.isNeedCallback>0?1:0)}if(ea.callbackPhone){d1=d1+"&callback_phone="+ea.callbackPhone}if(bk.roistat.leadHunter.additionalNotifyEmail!==null){d1=d1+"&additional_email="+encodeURIComponent(bk.roistat.leadHunter.additionalNotifyEmail)}var d4=0;if(ea.fields&&typeof ea.fields==="object"){for(var d7 in ea.fields){if(ea.fields.hasOwnProperty(d7)){++d4}}}if(d4>0){d1=d1+"&fields="+dM(JSON.stringify(ea.fields))}d1=d1+"&t="+bm();var d9=s.createElement("img");d9.src=d1;ef.setAttribute("style","");ck();if(dR===null){dc();cO()}else{cV()}if(bk.roistat.leadHunter.onAfterSubmit){n("LeadHunter: process user defined onAfterSubmit");bk.roistat.leadHunter.onAfterSubmit({name:ed,phone:d5})}}function c3(d1){if(d1.preventDefault){d1.preventDefault()}else{d1.returnValue=false}da.style.display==="block"?da.style.display="none":da.setAttribute("style","display: block; padding: 0 30px; width:"+df.clientWidth+"px;");dH()}function dX(){dU.disabled===true?dU.disabled=false:dU.disabled=true;c0.style.display==="block"?c0.style.display="none":c0.style.display="block"}function cO(){s.onmousemove=null;ds.onresize=null}var cL=function(d7,ea){if(!d7||!ea){n("LeadHunter: skip phone mask render due to empty input or mask");return}n("LeadHunter: render phone mask "+ea+" for input: "+d7.value);if(bk.roistatRenderPhoneMaskMutex){return}bk.roistatRenderPhoneMaskMutex=true;var d4="_",d3="x",d6="х",d5=ea.toLowerCase().split(d3).join(d4).split(d6).join(d4);var d2=function(eb){if(d7.setSelectionRange){d7.setSelectionRange(eb,eb)
}else{if(d7.createTextRange){var ec=d7.createTextRange();ec.collapse(true);ec.moveEnd("character",eb);ec.moveStart("character",eb);ec.select()}}};var d8=function(eb){if(!eb){return 0}var ec=eb.indexOf(d4);if(ec<0){return eb.length}return ec};var d9=function(eb){d2(d8(eb))};var d1=function(ek){var el=d5.split("");if(!ek){return d5}var eb=ek.split("");var em=[],ej,eg,ei,ef,ed,ec,eh;for(var ee=0;ee<el.length;ee++){eg=el[ee];if(ee>=eb.length){em.push(eg);continue}ed=((ee+1)<el.length)?el[ee+1]:null;ec=((ee+1)<eb.length)?eb[ee+1]:null;eh=((ee+2)<eb.length)?eb[ee+2]:null;ej=eb[ee];ei=parseInt(ej)>=0;ef=(eg===d4)&&ei;if(!ef){em.push(eg);continue}if(ec===d4&&ed!==d4&&eh!==ed){em.push(eg);continue}em.push(ej)}return em.join("")};setTimeout(function(){var eb=d1(d7.value);if(d7.value!==eb){d7.value=eb}d9(eb);bk.roistatRenderPhoneMaskMutex=false},1)};var dy=function(d1,d2){bi.set(cz(),bn.encode(d1));bi.set(cJ,bn.encode(d2))};bx(di);bk.roistatLeadHunterShow=cY;bk.roistatRenderPhoneMask=cL;bk.roistatSaveLeadHunterTemplates=dy})();(function m(){var co=function(){return h(b6)};var cm=function(){return bi.get(aF)};var cf=function(){return bi.get(aO)};var cs=function(cu){return cu!=null&&cu!==aU&&cu!==""};var cr=function(){var cu=[];var cv=s.getElementsByClassName(P);if(cv&&cv.length){cu=cv}return cu};var cd=function(){var cu=[];var cv=s.getElementsByClassName(r);if(cv&&cv.length){cu=cv}return cu};var cc=function(){var cu=[];var cv=s.getElementsByClassName(K);if(cv&&cv.length){cu=cv}return cu};var ch=function(){var cu=[];var cv=s.getElementsByClassName(u);if(cv&&cv.length){cu=cv}return cu};var ck=function(){var cu=[];var cv=s.getElementsByClassName(bZ);if(cv&&cv.length){cu=cv}return cu};var cb=function(cG,cv){n("CallTracking: RenderPhone phone = "+cG);var cz=function(cI){return cI.split(/[^0-9]/).join("")};var cA=function(cL,cN){var cQ=null;if(!cL){return cQ}var cI=cN.split(",");if(cI.length<2){cQ=cN}else{var cJ=cL.getAttribute("data-prefix");if(cJ){for(var cM=0;cM<cI.length;cM++){var cO=cI[cM];var cP=cz(cO);if(cP.indexOf("8")===0){cP="7"+cP.substring(1)}var cK=cP.split(cJ)[0]==="";if(cK){cQ=cO;break}}}if(cQ===null){cQ=cI[0]}n("CallTracking._getPhoneForElement: Prepared phone = "+cQ+" for data-prefix = "+cJ)}return cQ};var cy=function(cM,cK){var cI=cA(cM,cK);if(!cI||!cM){return}if(cM.tagName.toLowerCase()!=="a"){return}var cL=cM.getAttribute("href");if(bS(cL,"tel:")){var cJ=cz(cI);if(cJ.indexOf("8")===0){cJ="7"+cJ.substring(1)}cM.setAttribute("href","tel:+"+cJ)}};var cC=function(cK,cJ){var cI=cA(cK,cJ);if(!cI||!cK){return}cK.innerHTML=cI};var cH=function(cI){var cJ=cr();n("CallTracking: render phone default classes for "+cJ.length+" elements");l(cJ,function(cK){cC(cK,cI);cy(cK,cI)});l(cd(),function(cL){var cK=cz(cA(cL,cI)).slice(0,1);cC(cL,cK)});l(cc(),function(cL){var cM=cA(cL,cI).match(/\((.*)\)/);if(cM!==null){var cK=cM[1];cC(cL,cK)}});l(ch(),function(cM){var cK=cA(cM,cI).match(/\)(.*)/);if(cK!==null){var cN=cz(cK[1]);var cL=cN.slice(-1*cN.length,-4)+"-"+cN.slice(-4,-2)+"-"+cN.slice(-2);cC(cM,cL)}});l(ck(),function(cK){cy(cK,cI)})};var cF=function(cI,cN){if(!cN){return}n("CallTracking: render phone user replacement for "+cN.length+" replacements");for(var cM=0;cM<cN.length;cM++){var cP=cN[cM];if(!cP){continue}var cK=cP[0];cP=cP.substr(1);var cO=[];if(cK==="#"){var cL=s.getElementById(cP);if(cL!==null){cO.push(cL)}}else{cO=s.getElementsByClassName(cP);cx(cP,cI)}if(!cO||cO.length<1){continue}n("CallTracking: render phone for "+cP+", "+cO.length+" elements");for(var cJ=0;cJ<cO.length;cJ++){cC(cO[cJ],cI);cy(cO[cJ],cI)}}};var cB=function(cI){for(var cJ=0;cJ<cI.length;cJ++){cF(cI[cJ].phone,cI[cJ].css_selectors);cE(cI[cJ].phone,cI[cJ].replaceable_numbers)}};var cE=function(cK,cJ){if(!cJ||cJ.length===0){return}var cI=function(){var cS=cM();var cR=s.getElementsByTagName("*");var cN=cR.length;for(var cQ=0;cQ<cN;cQ++){var cT=cR[cQ];var cU=cT.childNodes.length;if(cU>0){for(var cO=0;cO<cU;cO++){var cP=cT.childNodes[cO];cL(cP,cS,cA(cP,cK))}}cL(cT,cS,cA(cT,cK))}};var cM=function(){var cP=[];for(var cN=0;cN<cJ.length;cN++){var cO="[\\s()[\\]{}\\-+.]*";var cQ=cJ[cN].split("").join(cO);cP.push(new RegExp("[+(]?"+cQ,"g"))}return cP};var cL=function(cQ,cP,cN){if(cQ.nodeType!==Node.TEXT_NODE){return}for(var cO=0;cO<cP.length;cO++){if(cQ.textContent&&cP[cO].test(cQ.textContent)){cQ.textContent=cQ.textContent.replace(cP[cO],cN);cy(cQ.parentNode,cN)}else{if(cQ.innerText&&cP[cO].test(cQ.innerText)){cQ.innerText=cQ.innerText.replace(cP[cO],cN);cy(cQ.parentNode,cN)}}}};cI()};var cx=function(cJ,cI){l(cw(cJ+"-"+a0),function(cL){var cK=cz(cA(cL,cI)).slice(0,1);cC(cL,cK)});l(cw(cJ+"-"+ag),function(cL){var cM=cA(cL,cI).match(/\((.*)\)/);if(cM!==null){var cK=cM[1];cC(cL,cK)}});l(cw(cJ+"-"+aE),function(cM){var cK=cA(cM,cI).match(/\)(.*)/);if(cK!==null){var cN=cz(cK[1]);var cL=cN.slice(-1*cN.length,-4)+"-"+cN.slice(-4,-2)+"-"+cN.slice(-2);cC(cM,cL)}});l(cw(cJ+"-"+ba),function(cK){cy(cK,cI)})};var cw=function(cJ){var cI=[];var cK=s.getElementsByClassName(cJ);
if(cK&&cK.length){cI=cK}return cI};var cD=function cD(){var cJ=cf();if(cJ){cJ=cJ.split("\n");for(var cI=0;cI<cJ.length;cI++){cJ[cI]="."+cJ[cI]}}if(cv instanceof Array){cB(cv)}else{cH(cG);cF(cG,cJ)}};(function cu(){cD();var cI=[300,5000,15000];cI.forEach(function(cJ){setTimeout(cD,cJ)})})()};var ce=function(cu){bi.save(j,cu,bH)};var cn=function(){if(bk.roistat.callTracking.phone){var cu={expires:parseInt(bk.roistat.callTracking.sessionTime),path:"/"};if(bH.domain){cu.domain=bH.domain}b0(b6,bk.roistat.callTracking.phone,cu);ce(1);bi.save(aO,bk.roistat.callTracking.replacementClasses,bH);bi.save(aF,bk.roistat.callTracking.phoneScriptsJson,bH)}};var cl=function(cu,cy,cw,cv){n("CallTracking: reuse phone "+cu+" for time "+cy+" and replacements "+cw);if(!cs(cu)){n("CallTracking: new phone is invalid");roistat.callTracking.phone=null;bU();return}roistat.callTracking.enabled=1;roistat.callTracking.phone=cu;roistat.callTracking.sessionTime=cy;roistat.callTracking.replacementClasses=cw;roistat.callTracking.phoneScriptsJson=cv;bU();cn();var cz={expires:parseInt(cy),path:"/"};if(bH.domain){cz.domain=bH.domain}b0(b6,cu,cz);bi.save(aF,cv,bH);bi.save(aO,cw,bH);var cx=bW(cv);if(cx==null){cb(cu)}else{cb(cu,cx)}};var cg=function(){n("CallTracking: request new phone");var cu=h(be);var cy=N();var cx=cy?cy:aP;var cw=encodeURIComponent(bw);var cv=x()+"/get-phone?visit="+cu+"&marker="+(cx?cx:"")+"&prefix="+bA+"&prefix_bind="+b7+"&phone_scripts_bind="+z+"&page="+cw;al(cv)};var ci=function(){bA=bk.roistatPhonePrefix?bk.roistatPhonePrefix:"";b7=bk.roistatPhonePrefixBind?bk.roistatPhonePrefixBind:"";z=bk.roistatCalltrackingScripts&&bk.roistatCalltrackingScripts.join?bk.roistatCalltrackingScripts.join(","):"";n("CallTracking: refresh phone with prefix: "+bA+", binding: "+b7+", scripts: "+z);cg()};var ct=function(){var cu=bi.get(j)>0;var cv=a7.callTrackingEnabled;return cu&&cv};var cj=function(cu){ce(cu.is_enabled)};var cq=function cq(){var cu=co();if(!cs(cu)){n("CallTracking: invalid phone "+cu+", requesting a new one");cg()}else{n("CallTracking: render phone "+cu);var cv=bW(cm());if(cv==null){cb(cu)}else{cb(cu,cv)}}};var cp=function(){n("CallTracking: init");cn();if(!ct()){n("CallTracking: disabled, skip");return}if(a7.callTrackingManual){n("CallTracking: init finish because off manual");return}cq();V(cq)};bk.roistatCallTrackingRefresh=ci;bk.roistatRequestNewPhone=cg;bk.roistatReusePhone=cl;bk.roistatCalltrackingUpdateSettings=cj;bx(cp)})();(function q(){var cd=function(cj){n("Emailtracking: "+cj)};var ch=function(cj,cl,ck){bi.save(aN,cj,bH);bi.save(b,cl,bH);bi.save(aX,JSON.stringify(ck),bH)};var cc=function(){var cj=(bk.roistat.emailtracking.email&&bk.roistat.emailtracking.trackingEmail)||ah(bk.roistat.emailtracking.emails);if(bk.roistat.emailtracking.loaded&&cj){cd("save loaded email: "+bk.roistat.emailtracking.email);ch(bk.roistat.emailtracking.email,bk.roistat.emailtracking.trackingEmail,bk.roistat.emailtracking.emails)}else{cd("settings save skip, because not loaded");bk.roistat.emailtracking.email=bi.get(aN);bk.roistat.emailtracking.email=bk.roistat.emailtracking.email?bk.roistat.emailtracking.email:null;bk.roistat.emailtracking.email=bk.roistat.emailtracking.email==="null"?null:bk.roistat.emailtracking.email;cd("email loaded from storage: "+bk.roistat.emailtracking.email);bk.roistat.emailtracking.trackingEmail=bi.get(b);bk.roistat.emailtracking.trackingEmail=bk.roistat.emailtracking.trackingEmail?bk.roistat.emailtracking.trackingEmail:null;bk.roistat.emailtracking.trackingEmail=bk.roistat.emailtracking.trackingEmail==="null"?null:bk.roistat.emailtracking.trackingEmail;cd("tracking email loaded from storage: "+bk.roistat.emailtracking.trackingEmail);bk.roistat.emailtracking.emails=bW(bi.get(aX));bk.roistat.emailtracking.emails=bk.roistat.emailtracking.emails?bk.roistat.emailtracking.emails:null;cd("emails loaded from storage: "+JSON.stringify(bk.roistat.emailtracking.emails))}};var cf=function(cj){ch(cj.email,cj.trackingEmail,cj.emails)};var ce=function(){var cj=(!!bk.roistat.emailtracking.email&&!!bk.roistat.emailtracking.trackingEmail)||ah(bk.roistat.emailtracking.emails);return bk.roistat.emailtracking.enabled&&cj};var cb=function(){if(!ce()){cd("emailtracking disabled, skip swapping");return}var ck=function(co,cp,cn){if(co.href){if(cp.test(co.href)){co.href=co.href.replace(cp,cn);return true}}if(co.nodeType!==3){return false}if(co.textContent&&cp.test(co.textContent)){co.textContent=co.textContent.replace(cp,cn);return true}else{if(co.innerText&&cp.test(co.innerText)){co.innerText=co.innerText.replace(cp,cn);return true}}return false};var cj=function(cn){return cn.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};var cl=function(cp,co){var cn=!co.match(/[a-z]/);return cn?cp.toUpperCase():cp};var cm=function(cv,cx){var cy=cj(cv);var cp=new RegExp("(^|\\s)(mailto:)?("+cy+")($|\\s|\\?)","gi");var cz=function(cE,cC,cA,cB,cD){cA=cA||"";return cC+cA+cl(cx,cB)+cD};cd("starting to replace email "+cv+" to "+cx+" with regexp "+cp);
var co=s.getElementsByTagName("*");var cr=co.length;cd("found "+cr+" nodes on page");var cu=0;for(var ct=0;ct<cr;ct++){var cq=co[ct];var cw=cq.childNodes.length;if(cw>0){for(var cs=0;cs<cw;cs++){var cn=cq.childNodes[cs];if(ck(cn,cp,cz)){cu++}}}if(ck(cq,cp,cz)){cu++}}cd("successfully replaced "+cu+" nodes")};if(bk.roistat.emailtracking.emails){aH(bk.roistat.emailtracking.emails,cm)}else{cm(bk.roistat.emailtracking.email,bk.roistat.emailtracking.trackingEmail)}};var cg=function(){cd("process email swap");cb();setTimeout(function(){cb()},300);setTimeout(function(){cb()},5000);setTimeout(function(){cb()},15000)};var ci=function(){cd("init");V(cg);cc();cg()};bk.roistatEmailtrackingUpdateSettings=cf;bk.roistat.emailtracking.refresh=cb;bx(ci)})();(function aJ(){var ce=function(cg){n("MultiDomain: "+cg)};var cd=function(){return bi.get(bI)>0};var cc=function(ck){var cl=function(cn){if(!cn){return false}if(bS(cn,"roistat_visit")){return false}var cm=av(cn);var cp=av(s.domain);var co=new RegExp(/^(https?:\/\/)?([A-ZА-ЯЁ0-9\_\-\~]+\.)+[A-ZА-ЯЁ0-9\_\-\~]+/i);return cm!==cp&&co.test(cn)};var cj=function(cp){var cq=cp.split("#");var co=cq[0].split("?");var cm="";var cn="";if(co.length===2){cm=co[1]}if(cm){cn="&"}cm=cm+cn+"roistat_visit="+roistat.getVisit();co[1]=cm;cq[0]=co.join("?");return cq.join("#")};if(ck.tagName.toLowerCase()!=="a"){return}var ci=ck.getAttribute("href");var ch=false;if(cl(ci)){var cg=cj(ci);ce("update url "+ci+" > "+cg);ck.setAttribute("href",cg);ch=true}return ch};var cb=function(){if(!cd()){ce("disabled, skip");return}var cg=s.getElementsByTagName("a");var ch=cg.length;ce("found "+ch+" <a> nodes on page");var ck=0;for(var ci=0;ci<ch;ci++){var cj=cg[ci];if(cc(cj)){ck++}}ce("replaced "+ck+" nodes")};var cf=function(){ce("init");cb();setTimeout(function(){cb()},300);setTimeout(function(){cb()},5000);setTimeout(function(){cb()},15000)};bx(cf)})();(function bP(){var cj=5*60*1000;var cc="roistat_last_settings_update_time";var cb=function(cl){n("SettingsUpdater: "+cl)};var cf=function(){return bi.get(cc)};var ch=function(){bi.set(cc,bm())};var ci=function(){var cm=cf();var cl=!(cm>0);cb("is first update check: lastUpdateTime="+cm+", result="+(cl?1:0));return cl};var ck=function(){var cn=bm()-cj;var cm=cf();var cl=cm<cn;cb("expiration check: _minTime="+cn+", lastUpdateTime="+cm+", result="+(cl?1:0));return cl};var ce=function(){var cl=h(be);a(cl)};var cd=function(cl){cb("update settings and save last update time");bk.roistatCalltrackingUpdateSettings(cl.calltracking);bk.roistatEmailtrackingUpdateSettings(cl.emailtracking);bk.roistatSaveLeadHunterTemplates(cl.leadhunter_templates.form_template,cl.leadhunter_templates.pulsator_template);bk.roistatSaveProxyFormSettings(cl.proxy_forms);ay(cl.js_settings);bg.isSettingsUpdating=false;ch()};var cg=function(){cb("init");if(ci()){cb("in first update we just start first timer and skip");ch();return}if(!ck()){cb("update is not not expired, skip");return}cb("start to update settings");ce()};bx(function(){bk.roistatUpdateSettings=cd;setTimeout(function(){cg()},3000);cb("set interval to update settings");var cl=at();var cm=cl.slice(-1);if(cm.charCodeAt(0)%100===0){cb("Project in focus group, set interval");setInterval(function(){cg()},60000)}})})();(function a4(cf,cb,ch){var ce={};var cc=function(cj){var ci=encodeURIComponent?encodeURIComponent:encodeURI;return ci(cj)};var cd=function(cp,cj){n("Reach goal start");if(!cp){cp={}}var cm={leadName:"",formTitle:"",name:"",phone:"",email:"",price:"",text:"",fields:"",client_fields:"",is_need_callback:"",callback_phone:"",visit:by(),is_skip_sending:0};for(var cl in cm){if(!Object.prototype.hasOwnProperty.call(cm,cl)){continue}if(!Object.prototype.hasOwnProperty.call(cp,cl)){continue}if(!cp[cl]){continue}if(cl==="fields"||cl==="client_fields"){cp[cl]=JSON.stringify(cp[cl])}cm[cl]=cc(cp[cl])}var co=at();var cn=ax()+"//"+o+"/api/site/"+I+"/"+co+"/reach-goal?v=2";for(var ck in cm){if(!Object.prototype.hasOwnProperty.call(cm,ck)){continue}cn=cn+"&"+ck+"="+cm[ck]}if(cj!==ch){var ci=Math.random().toString();ce[ci]=cj;cn+="&callback_key="+ci}al(cn);n("Reach goal completed")};var cg=cf.roistatGoal={reach:function(cj,ci){cd(cj,ci)},callAfterReachCallback:function(ci){if(Object.prototype.hasOwnProperty.call(ce,ci)){ce[ci]();delete ce[ci]}}}})(bk,s,aU);(function b2(cd,cb,ce){var cc=function(cj){if(cj instanceof Array||cj===null||typeof cj!=="object"){n("Invalid event data");return""}var cg=[];for(var ci in cj){if(Object.prototype.hasOwnProperty.call(cj,ci)){var ch=cj[ci];if(typeof ch==="string"||typeof ch==="number"){cg.push("data["+encodeURIComponent(ci)+"]="+encodeURIComponent(ch))}else{n("Event data property ignored: "+ci)}}}return cg.length>0?"&"+cg.join("&"):""};var cf=function(ci,cj){n("Send event start");var cg=k();var ch=x()+"/event/register?visit="+cg+"&event="+ci+cc(cj);al(ch);n("Send event completed")};cd.roistat.event={send:function(cg,ch){cf(cg,ch)}}})(bk,s,aU);(function bj(cl,cn,ce){var co=cl.roistatIsInitVisit===true?20000:10000;
var cd=(new Date()).getTime();var cc=function(cs){return"approve_visit_"+cs};var ck=function(cs){bb.set(cc(cs),1)};var cp=function(cs){return bb.get(cc(cs))>0};var cb,cg,cr=[];if(cn.addEventListener){cb=function(ct,cs,cu){return ct.addEventListener(cs,cu,false)};cg=function(ct,cs,cu){return ct.removeEventListener(cs,cu,false)}}else{cb=function(ct,cs,cu){return ct.attachEvent("on"+cs,cu)};cg=function(ct,cs,cu){return ct.detachEvent("on"+cs,cu)}}var cj=function(cv){if(cr.length>30){return}cv=cv||cl.event;if(!cv||!cv.screenX){return}var cu=(new Date()).getTime();var cx,cw=null;if(cr.length>0){cw=cr[cr.length-1]}if(cw){cx=cu-cw.time}else{cx=cu-cd}if(cx<300){return}cx=cx-300;var cz=0;var cs=cv.screenX;var cy=cv.screenY;if(cw){cz=parseInt(Math.sqrt(Math.pow(cw.y-cy,2)+Math.pow(cw.x-cs,2)))}var ct={time:cu,pauseBeforeMove:cx,x:cs,y:cy,distance:cz};cr.push(ct)};var ci=function(){var cs=[];l(cr,function(ct){var cu=[ct.pauseBeforeMove,ct.distance];cs.push(cu.join(":"))});if(cs.length===0){cs.push("0:0")}return cs.join("|")};var cf=function(){for(var cs in cl){if(bS(cs,"yaCounter")){return true}}return false};var cm=function(){cg(cn,"mousemove",cj);var cs=k();n("VisitApprove: start for visit "+cs);if(cp(cs)){n("VisitApprove: visit already approved, skip");return}ck(cs);X();var ct=x()+"/approve?v="+B+"&visit="+cs;if(cq()){ct+="&hash="+R()}if(ch()){ct+="&page_params="+encodeURIComponent(JSON.stringify(cl.roistat.page.params));e()}ct+="&mv="+ci();ct+="&pl="+(cl.navigator?cl.navigator.platform:"");ct+="&ym="+(cf()?"1":"0");al(ct)};var cq=function(){var cw=bg.cookies,cv=i();var cy=aB();for(var ct=0;ct<cy.length;ct++){var cx=cy[ct];var cz=Object.prototype.hasOwnProperty.call(cw,cx)?cw[cx]:ce;var cs=Object.prototype.hasOwnProperty.call(cv,cx)?cv[cx]:ce;var cu=typeof cs==="string"&&cs.length>0;if(cu&&cz!==cs){return true}}return false};var ch=function(){var cx=bg.pageParams,cu=cl.roistat.page.params;for(var ct=0;ct<bB.length;ct++){var cs=bB[ct];var cv=Object.prototype.hasOwnProperty.call(cx,cs)?cx[cs]:null;var cw=Object.prototype.hasOwnProperty.call(cu,cs)?cu[cs]:null;if(cw!==cv){return true}}return false};setTimeout(function(){cm()},co);cb(cn,"mousemove",cj)})(bk,s,aU);(function W(cg,ch,cc){var ce=function(){return D("roistat_ab_demo")==="1"};var ci=function(cl){return new RegExp(cl.split(".").join("\\.").split("*").join(".*").split("?").join("."))};var cf=function(cq){var cl=cg.location.href,co=cq.filter,cu=cq.filterValue;var cr;switch(co){case"except":case"pages":var cm,ct,cs=false;ct=cl?af(cl):"";cr=cu?cu.split("\n"):[];if(ct&&cr.length!==0){for(var cn=0;cn<cr.length;cn++){var cp=cr[cn].trim();if(cp.length===0){continue}cm=ci(cp);if(cm.test(ct)){cs=true;break}}}return(co==="pages")?cs:!cs;break;case"all":default:return true}};var cb=function(cn){var cl=ch.getElementsByTagName("head")[0],cm;cm=ch.createElement("style");cm.setAttribute("type","text/css");if(cm.styleSheet){cm.styleSheet.cssText=cn.value}else{cm.innerText=cn.value}cl.appendChild(cm)};var cd=function(cl){if(cf(cl)){switch(cl.type){case"css":cb(cl);break}}};cg.applyTests=function(){var cl=bi.getObject("abTesting");var cn,cm;for(cn in cl){if(!Object.prototype.hasOwnProperty.call(cl,cn)){continue}cm=cl[cn];cd(cm)}};var cj=function(){n("Call: apply demo AB test");var cl=D("roistat_ab_data");var cm;if(cl===null){return}else{cm=JSON.parse(bn.decode(cl))}if(typeof cm!=="object"){n("Error: testValue is not an object.");return}cd(cm)};function ck(){var cl=ce();if(!bM&&!cl){applyTests()}if(cl){cj()}}ck()})(bk,s,aU);(function az(cc,cb,cd){if(!bO){return}setTimeout(function(){(function(ck,cj,cn,cm,ch,cf,ci){ck[ch]={COUNTER_ID:cf,HOST:ci};var cg=cj.location.protocol=="https:"?"https://":"http://";var ce=cj.createElement(cn);ce.async=1;ce.src=cg+ci+cm;var cl=cj.getElementsByTagName(cn)[0];cl.parentNode.insertBefore(ce,cl)})(cc,cb,"script","/counter.js","datamap",at(),bO)},1000)})(bk,s,aU);(function bh(cd,cb,ce){var cf=function(){var cg=cd.roistatMetrikaCounterId;if(cg){bi.set(an,cg)}};var cc=function(cl){var cg="yaCounter"+cl;var ck=100,ci=0,cj=60000;var ch=function(){ci+=ck;n("YandexMetrika: trying to access counter "+cl);if(cd[cg]===ce){if(ci<cj){setTimeout(ch,ck);ck*=2}return}var cm={};cm[bE]=k();cd[cg].params(cm);n("YandexMetrika: visit id "+cm[bE]+" sent to counter "+cl)};setTimeout(ch,ck)};bx(function(){cf();var ci=bi.get(an);if(!ci){n("YandexMetrika: counter id not found");return}var ch=String(ci).split(",");n("YandexMetrika: counters: "+ch);for(var cg=0;cg<ch.length;cg++){if(ch[cg].trim()===""){continue}cc(ch[cg])}})})(bk,s,aU);(function S(cj,cn){var cr=function(ct){n("Proxy Forms: "+ct)};var cg=function(){if(cj.roistat.proxyForms.loaded&&cj.roistat.proxyForms.settings.length>0){cr("save loaded settings");co(cj.roistat.proxyForms.settings)}else{cr("settings not loaded, getting from storage");cj.roistat.proxyForms.settings=bi.getObject(b1)||[]}};var co=function(ct){bi.setObject(b1,ct)};var ck=function(){cr("init form listener");cd(cj.roistat.proxyForms.settings);cb(cj.roistat.proxyForms.settings)
};var cb=function(ct){var cv=[];l(ct,function(cw){if(cw.type==="js-button"){cv.push(cw)}});if(cv.length<1){cr("no button settings");return}var cu;if(cn.addEventListener){cu=function(cw){cf(cv,cw,cw.target,ce)};cn.addEventListener("click",cu,true)}else{if(cn.attachEvent){cu=function(){var cw=cj.event;cf(cv,cw,cw.srcElement,ce,true)};cn.attachEvent("onclick",cu)}else{cr("Listener could not be attached")}}};var cd=function(cu){var ct=[];l(cu,function(cw){if(cw.type==="form"){ct.push(cw)}});if(ct.length<1){cr("no form settings");return}if(cn.addEventListener){var cv=function(cw){cf(ct,cw,cw.target,cs)};cn.addEventListener("submit",cv,true)}else{if(cn.attachEvent){setInterval(function(){var cw=cn.getElementsByTagName("form");l(cw,function(cx){if(cx.getAttribute("data-roistat-proxy-form-checked")==="true"){return}cx.setAttribute("data-roistat-proxy-form-checked","true");l(ct,function(cy){if(cc(cx,cy.selector)){cx.attachEvent("onsubmit",function(){cj.event.returnValue=false;cs(cy,cj.event.srcElement)})}})})},2000)}else{cr("Listener could not be attached")}}};var cf=function(cw,cx,cy,cv,ct){var cu=null;l(cw,function(cz){if(cc(cy,cz.selector)){cu=cz}});if(cu===null){cr("No matched settings found for listener");return}cv(cx,cu,cy,ct)};var cs=function(cx,cv,cw,cu){var ct=cm(cw,cv);if(!cp(ct,cv)){return}cu?cx.returnValue=false:cx.preventDefault();ch(ct,cv,function(){HTMLFormElement.prototype.submit.call(cw)})};var ce=function(cv,cu){var ct=cm(null,cu);if(!cp(ct,cu)){return}ch(ct,cu)};var ch=function(ct,cu,cw){var cv={};cv.leadName="Новый лид с формы "+cu.title;cv.formTitle=cu.title;cv.name=ct.name;cv.phone=ct.phone;cv.email=ct.email;cv.text=ct.comment;cv.fields=ct.fields;cv.is_need_callback=cu.is_need_callback;cj.roistatGoal.reach(cv,cw)};var ci=function(ct){return(typeof ct==="number"&&!isNaN(ct))||(typeof ct==="string"&&ct!=="")||(typeof ct==="object"&&ct!==null)||(typeof ct==="boolean"&&ct)||aM(ct)};var cp=function(ct,cv){var cu=[],cx=["name","email","phone","comment"];l(cx,function(cy){if(cv.hasOwnProperty(cy)&&cv[cy].required>0){cu.push(cy)}});if(aM(cv.fields)){l(cv.fields,function(cy){if(cy.required>0){cu.push(cy)}})}var cw=true;l(cu,function(cy){if(!ct.hasOwnProperty(cy)||!ci(ct[cy])){cw=false}});return cw};var cm=function(cv,cu){var ct={};ct.name=cu.name?cl(cv,cu.name.value,cu.name.type):"";ct.phone=cu.phone?cl(cv,cu.phone.value,cu.phone.type):"";ct.email=cu.email?cl(cv,cu.email.value,cu.email.type):"";ct.comment=cu.comment?cl(cv,cu.comment.value,cu.comment.type):"";ct.fields={};if(aM(cu.fields)){l(cu.fields,function(cw){ct.fields[cw.name]=cl(cv,cw.value,cw.type)})}return ct};var cl=function(cu,cx,ct){switch(ct){case"plain":return cx||"";case"input":var cw=cu.querySelector('input[name="'+cx+'"]');return cw?cw.value:"";case"js":try{return(new Function(cx))()}catch(cv){return""}}};var cq=function(){cr("init");if(!cj.roistat.proxyForms.enabled){cr("disabled");return}cg();ck()};var cc=function(cv,ct){if(typeof Element!=="undefined"&&Element.prototype.matches){return cv.matches(ct)}else{if(typeof Element!=="undefined"&&Element.prototype.matchesSelector){return cv.matchesSelector(ct)}else{if(cn.querySelectorAll){var cw=cn.querySelectorAll(ct);for(var cu=0;cu<cw.length;cu++){if(cw[cu]===cv){return true}}return false}}}return false};bx(cq);cj.roistatSaveProxyFormSettings=co})(bk,s);(function w(){if(bk.onRoistatAllModulesLoaded!==aU&&typeof bk.onRoistatAllModulesLoaded==="function"){bk.onRoistatAllModulesLoaded()}})()})(window,document,undefined);